import{G as L,j as e}from"./app-CfsFC_sX.js";import{N as V}from"./notyf.es-ZvlfbKa9.js";/* empty css                  */import{d,r as N,l as z}from"./localizedFormat-VpGZUg9_.js";import S from"./FeedbackStep3-BIvEuCuS.js";import u from"./TinyMCE-qk9tNmoS.js";import D from"./TechPanelTinyMCE-CMgKpJO_.js";import"./xlsx-5rFX-EW9.js";import"./jodit-react-CtE3-kLk.js";d.extend(N);d.extend(z);function q({user:r,research:l,panels:c,technical_docs:i,feedbacks_step3:f,feedbacks_step3_notif:x,contents_mce:a,contents_mce_tech:y}){const n=new V,{setData:p,post:j,delete:g,patch:h,reset:b}=L({research_id:l.id,report_date:"",document_file:"",steps:"3"}),v=t=>{t.preventDefault(),j(route("researcher.technical.review.files"),{onSuccess:s=>{n.success(s.props.flash.message)},onFinish:()=>{console.log("Finishing uploading files"),b()}})},w=t=>{fetch(route("researcher.doc.download",t.id)).then(s=>s.blob()).then(s=>{const m=window.URL.createObjectURL(new Blob([s])),o=document.createElement("a");o.href=m,o.download=t.file_name||"downloaded-file",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(m)}).catch(s=>{console.error("Error fetching the file:",s)})},k=t=>{window.confirm("Are you sure you want to delete this file? This action cannot be undone.")&&g(route("researcher.delete.doc",t),{preserveScroll:!0,onSuccess:s=>n.success(s.props.flash.message),onError:()=>console.log("Error deleting"),onFinish:()=>b()})},F=t=>{h(route("researcher.mark.read",t),{onSuccess:s=>{console.log("Finishing read status")},onFinish:()=>{console.log("Finishing update status")}})},C=t=>{window.confirm("Are you sure you want to submit the consolidated report?")&&h(route("submit.consolidated.report.cre",t),{preserveScroll:!0,onSuccess:s=>{n.success(s.props.flash.message)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{class:"tabs tabs-lifted mt-3 p-2","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal",children:[e.jsx("button",{type:"button",class:"tab active-tab:tab-active active",id:"tabs-lifted-item-3","data-tab":"#tabs-lifted-3","aria-controls":"tabs-lifted-1",role:"tab","aria-selected":"true",children:"Files"}),e.jsxs("button",{type:"button",onClick:()=>{r.user_type==="researcher"?F(l.id):console.log("You do not have permission to perform this action.")},class:"tab active-tab:tab-active",id:"tabs-lifted-item-4","data-tab":"#tabs-lifted-4","aria-controls":"tabs-lifted-2",role:"tab","aria-selected":"false",children:["Feedback",x==0?"":e.jsxs("span",{class:"badge bg-[#FF0000] text-white badge-sm ms-2 rounded-full",children:["+",x]})]}),r.user_type==="researcher"||r.user_type==="cre"||r.user_type==="tpl"?e.jsxs("button",{type:"button",class:"tab active-tab:tab-active",id:"tabs-lifted-item-consolidated-form","data-tab":"#tabs-lifted-consolidated-form","aria-controls":"tabs-lifted-1",role:"tab","aria-selected":"true",children:[r.user_type=="cre"||r.user_type=="researcher"?"Consolidated":"Individual"," Comments & Suggestions"]}):e.jsx(e.Fragment,{}),r.user_type=="tpl"&&(a==null?void 0:a.status)=="A"&&e.jsx("button",{type:"button",class:"tab active-tab:tab-active",id:"tabs-lifted-item-consolidated-form-tech-lead","data-tab":"#tabs-lifted-consolidated-form-tech-lead","aria-controls":"tabs-lifted-1",role:"tab","aria-selected":"true",children:"Consolidated Comments & Suggestions"})]}),e.jsxs("div",{class:"mt-3",children:[e.jsx("div",{id:"tabs-lifted-3",role:"tabpanel","aria-labelledby":"tabs-lifted-item-3",children:r.user_type=="cre"?e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("form",{onSubmit:v,children:e.jsxs("div",{class:"grid grid-cols-3 gap-6 md:grid-cols-3 mt-3 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{class:"label label-text",for:"firstName",children:"Report Date "}),e.jsx("input",{type:"date",placeholder:"",onChange:t=>p("report_date",t.target.value),class:"input",id:"firstName"})]}),e.jsxs("div",{children:[e.jsx("label",{class:"label label-text",for:"firstName",children:"Document File "}),e.jsx("input",{type:"file",placeholder:"",onChange:t=>p("document_file",t.target.files[0]),class:"input",id:"firstName"})]}),e.jsx("div",{class:"flex justify-end gap-y-2 mt-7",children:e.jsxs("button",{type:"submit",class:"btn btn-default rounded-full",children:[e.jsx("span",{class:"icon-[tabler--upload] text-base-content/80 size-6"}),"Upload"]})})]})}),e.jsxs("div",{class:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 mt-3 rounded-md",children:[e.jsx("strong",{class:"font-semibold",children:"Important:"})," Please ",e.jsx("span",{class:"font-semibold",children:"do not delete or remove any previously uploaded documents"})," as they are crucial for version tracking."]}),e.jsxs("table",{class:"w-full divide-y divide-gray-200 dark:divide-neutral-700 mt-3",children:[e.jsx("thead",{class:"bg-gray-100 dark:bg-neutral-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder uppercase dark:text-neutral-500",children:"Version #"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500",children:"File"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500",children:"Report Date"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500",children:"Date Created"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500"})]})}),e.jsx("tbody",{class:"divide-y divide-gray-200 dark:divide-neutral-700",children:i.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{class:"border-b hover:bg-gray-50",children:[e.jsxs("td",{class:"px-3 py-3 text-balance whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:["V",s+1]}),e.jsx("td",{class:"px-3 py-3 text-balance whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:t.file_name}),e.jsx("td",{class:"px-3 py-3 whitespace-nowrap truncate text-xs/5 text-gray-500",children:d(t.report_date).format("LLL")}),e.jsx("td",{class:"px-3 py-3 whitespace-nowrap truncate text-xs/5 text-gray-500",children:d(t.created_at).format("LLL")}),e.jsx("td",{class:"px-3 py-3 whitespace-nowrap text-end text-sm font-medium",children:e.jsx("span",{class:"hover:cursor-pointer",onClick:()=>k(t.id),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"})})})})]})}))})]}),i.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-white p-6 shadow-lg rounded-lg border border-gray-200",children:[e.jsx("div",{class:"flex justify-center items-center",children:e.jsx("svg",{class:"h-16 w-16 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 4V6H7V4H5v16h14V4h-2z"})})}),e.jsxs("div",{class:"text-center mt-4",children:[e.jsx("h3",{class:"text-xl font-semibold text-gray-800",children:"Oops, no items found!"}),e.jsx("p",{class:"mt-2 text-gray-500",children:"It seems like the list is empty. Would you like to add new data or try again later?"})]})]})}):e.jsx(e.Fragment,{})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{class:"",children:[e.jsxs("div",{class:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 mt-3 rounded-md",children:[e.jsx("strong",{class:"font-semibold",children:"Important:"})," Please ",e.jsx("span",{class:"font-semibold",children:"do not delete or remove any previously uploaded documents"})," as they are crucial for version tracking."]}),e.jsxs("table",{class:"w-full divide-y divide-gray-200 dark:divide-neutral-700 mt-3",children:[e.jsx("thead",{class:"bg-gray-100 dark:bg-neutral-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder uppercase dark:text-neutral-500",children:"Version #"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500",children:"File"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500",children:"Report Date"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500",children:"Date Created"}),e.jsx("th",{scope:"col",class:"px-3 py-3  text-start text-xs font-bolder text-base-content uppercase dark:text-neutral-500"})]})}),e.jsx("tbody",{class:"divide-y divide-gray-200 dark:divide-neutral-700",children:i.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{class:"border-b hover:bg-gray-50",children:[e.jsxs("td",{class:"px-3 py-3 text-balance whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:["V",s+1]}),e.jsx("td",{class:"px-3 py-3 text-balance whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:t.file_name}),e.jsx("td",{class:"px-3 py-3 whitespace-nowrap truncate text-xs/5 text-gray-500",children:d(t.report_date).format("LLL")}),e.jsx("td",{class:"px-3 py-3 whitespace-nowrap truncate text-xs/5 text-gray-500",children:d(t.created_at).format("LLL")}),e.jsx("td",{class:"px-3 py-3 whitespace-nowrap text-end text-sm font-medium",children:e.jsxs("span",{class:"hover:cursor-pointer",onClick:()=>w(t),children:[" ",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z"})})]})})]})}))})]}),i.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-white p-6 shadow-lg rounded-lg border border-gray-200",children:[e.jsx("div",{class:"flex justify-center items-center",children:e.jsx("svg",{class:"h-16 w-16 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 4V6H7V4H5v16h14V4h-2z"})})}),e.jsxs("div",{class:"text-center mt-4",children:[e.jsx("h3",{class:"text-xl font-semibold text-gray-800",children:"Oops, no items found!"}),e.jsx("p",{class:"mt-2 text-gray-500",children:"It seems like the list is empty. Would you like to add new data or try again later?"})]})]})}):e.jsx(e.Fragment,{})]})})}),e.jsx("div",{id:"tabs-lifted-4",class:"hidden",role:"tabpanel","aria-labelledby":"tabs-lifted-item-4",children:e.jsx("div",{class:"vertical-scrollbar rounded-scrollbar max-h-screen w-full p-4",children:e.jsx(S,{user:r,research:l,feedbacks_step3:f})})}),e.jsx("div",{id:"tabs-lifted-consolidated-form",class:"hidden",role:"tabpanel","aria-labelledby":"tabs-lifted-item-consolidated-form",children:r.user_type==="cre"||r.user_type==="researcher"?e.jsxs(e.Fragment,{children:[e.jsx(u,{user:r,research:l,contents_mce:a,panels:c}),(a==null?void 0:a.status)!=="A"?e.jsx("div",{className:"mt-3",children:e.jsx("button",{type:"button",onClick:()=>C(a.id),className:"px-4 py-2 mt-6 text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-md focus:outline-none",children:"Submit Consolidated"})}):e.jsx("div",{className:"mt-6 text-center text-green-600 font-semibold",children:"✅ The consolidated report has already been submitted."})]}):r.user_type==="tpl"?e.jsx(D,{research:l,contents_mce_tech:y}):e.jsxs("div",{className:"p-4 mb-4 border-l-4 border-gray-500 bg-gray-100 text-gray-700 rounded-md shadow-md",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"No Content Available"}),e.jsx("p",{className:"text-xs mt-1",children:"There is no content to display for this user type."})]})}),e.jsx("div",{id:"tabs-lifted-consolidated-form-tech-lead",class:"hidden",role:"tabpanel","aria-labelledby":"tabs-lifted-item-consolidated-form-tech-lead",children:e.jsx(u,{user:r,research:l,contents_mce:a,panels:c})})]})]})}export{q as default};
