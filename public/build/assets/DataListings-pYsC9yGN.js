import{c as v,g as B,r as _,A as q,j as e,x as U}from"./app-CfsFC_sX.js";import{d as O,r as H,l as V}from"./localizedFormat-VpGZUg9_.js";import{_ as X}from"./lodash-rTh0s5b3.js";import{u as w,w as Z}from"./xlsx-5rFX-EW9.js";import{c as J}from"./createLucideIcon-L8raXI1g.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Q=J("FileSpreadsheet",K);function Y(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var D=Y,ee=typeof v=="object"&&v&&v.Object===Object&&v,te=ee,se=te,re=typeof self=="object"&&self&&self.Object===Object&&self,ae=se||re||Function("return this")(),M=ae,ne=M,ie=function(){return ne.Date.now()},le=ie,oe=/\s/;function ce(t){for(var r=t.length;r--&&oe.test(t.charAt(r)););return r}var de=ce,xe=de,pe=/^\s+/;function ue(t){return t&&t.slice(0,xe(t)+1).replace(pe,"")}var me=ue,fe=M,he=fe.Symbol,L=he,N=L,z=Object.prototype,ge=z.hasOwnProperty,be=z.toString,g=N?N.toStringTag:void 0;function je(t){var r=ge.call(t,g),l=t[g];try{t[g]=void 0;var n=!0}catch{}var c=be.call(t);return n&&(r?t[g]=l:delete t[g]),c}var ye=je,ve=Object.prototype,_e=ve.toString;function Se(t){return _e.call(t)}var Te=Se,E=L,we=ye,ke=Te,Oe="[object Null]",Re="[object Undefined]",F=E?E.toStringTag:void 0;function $e(t){return t==null?t===void 0?Re:Oe:F&&F in Object(t)?we(t):ke(t)}var Ce=$e;function Ne(t){return t!=null&&typeof t=="object"}var Ee=Ne,Fe=Ce,Ae=Ee,Ie="[object Symbol]";function Pe(t){return typeof t=="symbol"||Ae(t)&&Fe(t)==Ie}var De=Pe,Me=me,A=D,Le=De,I=NaN,ze=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,We=/^0o[0-7]+$/i,Be=parseInt;function qe(t){if(typeof t=="number")return t;if(Le(t))return I;if(A(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=A(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Me(t);var l=Ge.test(t);return l||We.test(t)?Be(t.slice(2),l?2:8):ze.test(t)?I:+t}var Ue=qe,He=D,k=le,P=Ue,Ve="Expected a function",Xe=Math.max,Ze=Math.min;function Je(t,r,l){var n,c,d,m,i,x,p=0,b=!1,s=!1,u=!0;if(typeof t!="function")throw new TypeError(Ve);r=P(r)||0,He(l)&&(b=!!l.leading,s="maxWait"in l,d=s?Xe(P(l.maxWait)||0,r):d,u="trailing"in l?!!l.trailing:u);function o(a){var f=n,h=c;return n=c=void 0,p=a,m=t.apply(h,f),m}function S(a){return p=a,i=setTimeout(y,r),b?o(a):m}function j(a){var f=a-x,h=a-p,C=r-f;return s?Ze(C,d-h):C}function R(a){var f=a-x,h=a-p;return x===void 0||f>=r||f<0||s&&h>=d}function y(){var a=k();if(R(a))return $(a);i=setTimeout(y,j(a))}function $(a){return i=void 0,u&&n?o(a):(n=c=void 0,m)}function G(){i!==void 0&&clearTimeout(i),p=0,n=x=c=i=void 0}function W(){return i===void 0?m:$(k())}function T(){var a=k(),f=R(a);if(n=arguments,c=this,x=a,f){if(i===void 0)return S(x);if(s)return clearTimeout(i),i=setTimeout(y,r),o(x)}return i===void 0&&(i=setTimeout(y,r)),m}return T.cancel=G,T.flush=W,T}var Ke=Je;const Qe=B(Ke);O.extend(H);O.extend(V);const Ye=t=>{switch(t){case"D":return e.jsx("div",{class:"flex items-center justify-center gap-1.5 text-xs font-bold",children:e.jsx("span",{class:"text-neutral",children:"Draft"})});case"S":return e.jsx("div",{class:"flex items-center justify-center gap-1.5 text-xs font-bold",children:e.jsx("span",{class:"text-accent",children:"Submitted"})});case"REC":return e.jsx("div",{class:"flex items-center justify-center gap-1.5 text-xs font-bold",children:e.jsx("span",{class:"text-lime-600",children:"Received"})})}},et=({researchs:t,user:r,initialFilters:l})=>{const[n,c]=_.useState(l),d=_.useRef(null),m=X.size(t),i=_.useCallback(s=>{console.log("Changed value:",s),q.get(route(route().current()),{r_type:s.r_type,r_status:s.r_status,r_steps:s.r_steps},{preserveState:!0,replace:!0})},[]),x=_.useMemo(()=>Qe(i,500),[i]),p=s=>{const{name:u,value:o}=s.target;c(S=>{const j={...S,[u]:o};return x(j),j})},b=()=>{if(!d.current)return;const s=d.current,u=w.table_to_sheet(s),o=w.book_new();w.book_append_sheet(o,u,"Research Data"),Z(o,"Research_Data.xlsx")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"r_type",className:"text-sm font-semibold text-gray-700 mb-1",children:"Research Type"}),e.jsxs("select",{name:"r_type",id:"r_type",value:n.r_type,onChange:p,className:"select w-full rounded-md border-gray-300 shadow-sm focus:ring focus:ring-blue-200",children:[e.jsx("option",{value:"0",children:"All Types"}),e.jsx("option",{disabled:r.user_type==="cre"||r.user_type==="tpl",value:"D",children:"Draft"}),e.jsx("option",{value:"S",children:"For Acceptance"}),e.jsx("option",{value:"REC",children:"On Progress"})]})]}),n.r_type!=="S"&&n.r_type!=="0"&&n.r_type!==null&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"r_steps",className:"text-sm font-semibold text-gray-700 mb-1",children:"Research Steps"}),e.jsxs("select",{name:"r_steps",id:"r_steps",value:n.r_steps,onChange:p,className:"select w-full rounded-md border-gray-300 shadow-sm focus:ring focus:ring-blue-200",children:[e.jsx("option",{value:"0",children:"All Steps"}),e.jsx("option",{value:"2",children:"Technical Committee & Schedule"}),e.jsx("option",{value:"3",children:"Technical Review Report"}),e.jsx("option",{value:"4",children:"Approval of Revised Docs"}),e.jsx("option",{value:"5",children:"Ethics Clearance"}),e.jsx("option",{value:"6",children:"Budget Proposal"}),e.jsx("option",{value:"7",children:"URB Approval"}),e.jsx("option",{value:"8",children:"MOA Signing"}),e.jsx("option",{value:"9",children:"Progress Report"}),e.jsx("option",{value:"10",children:"Tech Panel Endorsement"}),e.jsx("option",{value:"11",children:"Turnitin"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"r_status",className:"text-sm font-semibold text-gray-700 mb-1",children:"Research Status"}),e.jsxs("select",{name:"r_status",id:"r_status",value:n.r_status,onChange:p,className:"select w-full rounded-md border-gray-300 shadow-sm focus:ring focus:ring-blue-200",children:[e.jsx("option",{value:"0",children:"All Status"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"On Process",children:"On Process"})]})]})]})]}),e.jsx("div",{className:"flex justify-end mb-3 mt-3",children:e.jsxs("button",{onClick:b,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md shadow-md transition duration-300",children:[e.jsx(Q,{size:20}),e.jsx("span",{children:"Export to Excel"})]})}),e.jsx("div",{class:"overflow-x-auto",children:e.jsxs("table",{ref:d,class:"min-w-full table-auto border divide-y divide-gray-200 dark:divide-neutral-700",children:[e.jsx("thead",{class:"bg-gray-400 dark:bg-neutral-700",children:e.jsxs("tr",{class:"bg-gray-800 text-white dark:bg-neutral-900",children:[e.jsx("th",{scope:"col",class:"px-4 py-3 text-left text-sm font-semibold uppercase",children:"Research Title"}),e.jsx("th",{scope:"col",class:"px-4 py-3 text-left text-sm font-semibold uppercase",children:"Author"}),e.jsx("th",{scope:"col",class:"px-4 py-3 text-left text-sm font-semibold uppercase",children:"College"}),e.jsx("th",{scope:"col",class:"px-4 py-3 text-left text-sm font-semibold uppercase",children:"Research Status"}),e.jsx("th",{scope:"col",class:"px-4 py-3 text-left text-sm font-semibold uppercase",children:"Date Created"}),e.jsx("th",{scope:"col",class:"px-4 py-3 text-center text-sm font-semibold uppercase",children:"Type"}),e.jsx("th",{scope:"col",class:"px-4 py-3 w-24"})]})}),e.jsx("tbody",{class:"divide-y divide-gray-200 dark:divide-neutral-700",children:t.map((s,u)=>{var o;return e.jsxs("tr",{class:u%2!==0?"bg-gray-50 dark:bg-gray-800 dark:border-gray-700":"bg-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{class:"px-2 py-2 truncate max-w-xs whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:s.research_title}),e.jsx("td",{class:"px-2 py-2 truncate max-w-xs whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:(o=s.author)==null?void 0:o.name}),e.jsx("td",{class:"px-2 py-2 whitespace-nowrap text-sm font-medium text-gray-700 dark:text-neutral-200",children:s.department.name}),e.jsx("td",{class:"px-2 py-2",children:e.jsx("span",{class:"text-gray-600 text-sm font-bold",children:s&&s.app_status&&s.app_status.name!==null&&s.app_status.name!==void 0?s.app_status.name=="Pending"?e.jsxs("div",{class:"flex items-center justify-start gap-1.5 text-xs font-bold text-warning",children:[e.jsx("span",{class:"badge badge-warning size-1.5 p-0"}),"Pending"]}):e.jsxs("div",{children:[s&&s.app_status&&s.app_status.name!==null&&s.app_status.name!==void 0?e.jsxs(e.Fragment,{children:["Step ",s.app_status.steps,": ",s.app_status.name]}):e.jsx(e.Fragment,{}),e.jsx("div",{class:"w-60",children:s.app_status.status=="Submitted"||s.app_status.status=="Completed"||s.app_status.status=="Scheduled"?e.jsxs("div",{class:"flex items-center justify-start gap-1.5 text-base font-bold",children:[e.jsx("span",{class:"badge badge-success badge-xs size-1.5 p-0"}),e.jsxs("span",{class:"text-xs",children:[" ",s.app_status.status]})]}):e.jsxs("div",{class:"flex items-center justify-start gap-1.5 text-base font-bold",children:[e.jsx("span",{class:"badge badge-info badge-xs size-1.5 p-0"}),e.jsx("span",{class:"text-xs",children:s.app_status.status})]})})]}):e.jsx(e.Fragment,{children:e.jsx("span",{class:"text-xs ",children:"N/A"})})})}),e.jsx("td",{class:"px-2 py-2 whitespace-nowrap truncate text-xs/5 text-gray-500",children:O(s.created_at).format("LL")}),e.jsx("td",{class:"px-2 py-2 whitespace-nowrap text-xs text-gray-800 dark:text-neutral-200",children:e.jsx("span",{class:"text-xs text-gray-500",children:Ye(s.status)})}),e.jsx("td",{class:"px-2 py-2 whitespace-nowrap text-sm font-medium",children:e.jsx(U,{href:route("researcher.show",s.reference),children:e.jsx("button",{class:"btn btn-xs bg-gray-500 text-white rounded-md text-xs",children:e.jsx("span",{class:"icon-[tabler--files]"})})})})]})})}),e.jsx("tfoot",{children:e.jsx("tr",{class:"bg-gray-100",children:e.jsx("td",{colspan:"7",class:"border-t text-left",children:e.jsxs("div",{class:"p-3 rounded-lg shadow-md",children:[e.jsx("span",{class:"text-sm text-gray-600",children:"Total Records:"}),e.jsxs("span",{id:"total-records",class:"text-sm font-semibold text-blue-600",children:[" ",m]})]})})})})]})})]})},it=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));export{et as D,it as a,Qe as d};
