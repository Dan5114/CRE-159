import{r as b,G as F,j as e}from"./app-CfsFC_sX.js";import{N}from"./notyf.es-ZvlfbKa9.js";/* empty css                  */import{d as r,r as _,l as C}from"./localizedFormat-VpGZUg9_.js";import S from"./ProgressExtensionModal-Ba6EZVQE.js";import V from"./FeedbackStep9-p7UQvrZi.js";import"./Modal-DQrqF8Fh.js";import"./transition-DUC5GS0N.js";import"./SecondaryButton-DNv47flu.js";import"./PrimaryButton-CsGVTskv.js";import"./TextInput-BKA5K7tg.js";r.extend(_);r.extend(C);function q({user:c,research:l,progress_report:a,feedbacks_step9:j,feedbacks_step9_notif:m}){const o=new N,[f,h]=b.useState([]),{data:g,setData:n,post:u,patch:p,reset:x}=F({research_id:l.id,date_scheduled:"",date_due:"",steps:"9",document_file:"",type:""});b.useEffect(()=>{n("id",f)},[g.type,g.document_file]);const v=s=>{s.preventDefault(),u(route("cre.progress.report.date"),{onSuccess:d=>{o.success(d.props.flash.message)},onFinish:()=>{console.log("Finishing scheduling progress date"),x()}})},y=()=>{u(route("researcher.progress.report.files"),{onSuccess:s=>{o.success(s.props.flash.message)},onFinish:()=>{console.log("Finishing scheduling progress date"),x()}})},w=s=>{s.preventDefault(),p(route("researcher.extension.date",l.id),{preserveScroll:!0,onSuccess:d=>{o.success(d.props.flash.message)},onFinish:()=>{console.log("Finishing updating extension date"),x()}})},k=s=>{fetch(route("researcher.file.download",s.id)).then(d=>d.blob()).then(d=>{const t=window.URL.createObjectURL(new Blob([d])),i=document.createElement("a");i.href=t,i.download=s.file_name||"downloaded-file",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)}).catch(d=>{console.error("Error fetching the file:",d)})},L=s=>{p(route("accept.progress.report",s),{preserveScroll:!0,onSuccess:d=>{o.success(d.props.flash.message)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{class:"tabs tabs-lifted mt-3 p-2","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal",children:[e.jsx("button",{type:"button",class:"tab active-tab:tab-active active",id:"tabs-progress-item-1","data-tab":"#tabs-progress-1","aria-controls":"tabs-lifted-1",role:"tab","aria-selected":"true",children:"Progress Report"}),e.jsxs("button",{type:"button",onClick:()=>{c.user_type==="researcher"?markAsRead(l.id):console.log("You do not have permission to perform this action.")},class:"tab active-tab:tab-active",id:"tabs-progress-item-2","data-tab":"#tabs-progress-2","aria-controls":"tabs-progress-2",role:"tab","aria-selected":"false",children:["Feedback",m==0?"":e.jsxs("span",{class:"badge bg-[#FF0000] text-white badge-sm ms-2 rounded-full",children:["+",m]})]})]}),e.jsxs("div",{class:"",children:[e.jsx("div",{id:"tabs-progress-1",role:"tabpanel","aria-labelledby":"tabs-progress-item-1",children:c.user_type=="cre"?e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("div",{class:"card mt-3 p-3",children:[e.jsx("div",{class:"bg-green-50 border-l-4 border-green-500 p-4 shadow-md rounded-lg mb-3",children:e.jsxs("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{class:"flex items-start",children:[e.jsx("div",{class:"flex-shrink-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20",children:e.jsxs("g",{fill:"gray","fill-rule":"evenodd","clip-rule":"evenodd",children:[e.jsx("path",{d:"M5.75 11.5a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75m0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75"}),e.jsx("path",{d:"M2.5 2.5c0-1.102.898-2 2-2h6.69c.562 0 1.092.238 1.465.631l.006.007l4.312 4.702c.359.383.527.884.527 1.36v10.3c0 1.102-.898 2-2 2h-11c-1.102 0-2-.898-2-2zm8.689 0H4.5v15h11V7.192l-4.296-4.685l-.003-.001z"}),e.jsx("path",{d:"M11.19.5a1 1 0 0 1 1 1v4.7h4.31a1 1 0 1 1 0 2h-5.31a1 1 0 0 1-1-1V1.5a1 1 0 0 1 1-1"})]})})}),e.jsxs("div",{class:"ml-3 w-full",children:[e.jsx("h3",{class:"text-lg font-semibold text-gray-800",children:"Research Application"}),e.jsx("form",{onSubmit:w,children:e.jsxs("div",{class:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 items-center",children:[e.jsxs("div",{children:[e.jsxs("label",{for:"extension-date",class:"block text-sm font-medium text-gray-700",children:["Extension Date ",e.jsx("span",{class:"text-gray-400",children:"(optional)"})]}),e.jsx("input",{type:"date",id:"extension-date",onChange:s=>n("date_extension",s.target.value),name:"extension-date",class:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm p-2"})]}),l.date_extension?e.jsx(e.Fragment,{}):e.jsx("div",{class:"flex items-end mt-5",children:e.jsx("button",{type:"submit",class:"disable w-full sm:w-auto px-4 py-2 text-sm text-white bg-green-600 hover:bg-green-700 rounded-md shadow-md focus:outline-none",children:"Save Changes"})})]})})]})]}),e.jsxs("div",{class:"p-4 bg-gray-50 rounded-lg shadow-md border border-gray-200",children:[e.jsx("h3",{class:"text-lg font-semibold text-gray-900",children:"ðŸ“… Schedule Summary"}),e.jsxs("div",{class:"mt-3 flex items-center gap-2",children:[e.jsx("p",{class:"text-sm font-medium text-gray-700",children:"Completion Date:"}),e.jsx("p",{class:`text-sm font-semibold ${l.date_completion?"text-green-700":"text-gray-400"}`,children:l.date_completion?r(l.date_completion).format("LL"):"---"})]}),e.jsxs("div",{class:"mt-2 flex items-center gap-2",children:[e.jsx("p",{class:"text-sm font-medium text-gray-700",children:"Extension Date:"}),e.jsx("p",{class:`text-sm font-semibold ${l.date_extension?"text-red-600":"text-gray-400"}`,children:l.date_extension?r(l.date_extension).format("LL"):"---"})]})]})]})}),e.jsx("div",{class:"bg-blue-50 border-l-4 border-blue-500 p-4 shadow-md rounded-lg",children:e.jsxs("div",{class:"flex items-start",children:[e.jsx("div",{class:"flex-shrink-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"})})}),e.jsxs("div",{class:"ml-3 w-full",children:[e.jsx("h3",{class:"text-lg font-semibold text-gray-800",children:"Set Progress Report Schedule"}),e.jsx("form",{onSubmit:v,class:"mt-4 mb-3",children:e.jsxs("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsxs("label",{for:"followup-date",class:"block text-sm font-medium text-gray-700",children:["Scheduled Date ",e.jsx("span",{class:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"followup-date",onChange:s=>n("date_scheduled",s.target.value),name:"followup-date",class:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm p-2"})]}),e.jsx("div",{class:"flex justify-start",children:e.jsx("button",{type:"submit",class:"px-4 py-2 text-sm text-white bg-green-600 hover:bg-green-700 rounded-md shadow-md focus:outline-none",children:"Add Schedule"})})]})})]})]})}),e.jsxs("div",{class:"space-y-4 mt-3",children:[e.jsx("h4",{class:"mt-5 text-2xl font-semibold text-gray-800 border-b pb-2 border-gray-300",children:"ðŸ—“ï¸ Progress Report Dates"}),a.map((s,d)=>e.jsxs("div",{class:"p-6 rounded-lg  border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between bg-gray-100 p-2 rounded items-center w-full text-md sm:text-md font-semibold text-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:["ðŸ“… ",e.jsx("span",{className:"text-gray-800",children:r(s.date_scheduled).format("LL")})]}),s.date_due?e.jsx(e.Fragment,{children:e.jsxs("span",{class:"text-red-600",children:["Extension Date: ",r(s.date_due).format("LL")]})}):e.jsx("p",{className:"text-gray-600",children:e.jsx("span",{className:"ml-2",children:e.jsx(S,{id:s.id})})})]}),e.jsx("div",{class:"grid grid-cols-2 gap-4 mt-2",children:s.details.map((t,i)=>e.jsxs("div",{id:`listings-${i}`,class:"border-l-4 border-green-400 pl-3 py-2 bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{class:"flex items-center justify-between bg-green-50 px-3 py-2 rounded-md",children:[e.jsx("h4",{class:"text-gray-700 text-base sm:text-md font-semibold",children:t.type==="1"?"ðŸ“Œ Progress Report":t.type==="2"?"ðŸ“Š Liquidation Report":"ðŸ“‚ Others"}),e.jsxs("span",{class:"text-xs text-gray-600",children:[r(t.files.created_at).format("LLL"),"(",e.jsxs("time",{dateTime:t.files.created_at,children:[r().from(r(t.files.created_at),!0)," ago"]}),")"]})]}),e.jsx("ul",{role:"list",class:"divide-y divide-gray-200 mt-2 text-xs border border-gray-200 rounded-md",children:e.jsxs("li",{class:"flex items-center justify-between py-2 px-3",children:[e.jsxs("div",{class:"flex w-0 flex-1 items-center gap-2",children:[e.jsx("span",{class:"icon-[tabler--paperclip] size-5 flex-shrink-0 text-gray-600"}),e.jsx("span",{class:"truncate font-medium text-gray-800",children:t.files.file_name})]}),e.jsx("div",{class:"flex-shrink-0",children:e.jsx("a",{href:"#",onClick:()=>k(t.files),class:"text-green-600 hover:text-green-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z"})})})})]})})]}))}),s.status!=="accepted"?e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>L(s.id),className:"px-4 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-md focus:outline-none",children:"Accept Progress Report"})}):e.jsx("div",{className:"mt-3 text-center text-green-600 font-semibold",children:"âœ… The progress report has already been accepted."}),s.details.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-white p-6 mt-3 shadow-lg rounded-lg border border-gray-200",children:[e.jsx("div",{class:"flex justify-center items-center",children:e.jsx("svg",{class:"h-16 w-16 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 4V6H7V4H5v16h14V4h-2z"})})}),e.jsxs("div",{class:"text-center mt-4",children:[e.jsx("h3",{class:"text-xl font-semibold text-gray-800",children:"Oops, no items found!"}),e.jsx("p",{class:"mt-2 text-gray-500",children:"It seems like the list is empty. Would you like to add new data or try again later?"})]})]})}):e.jsx(e.Fragment,{})]})),a.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-white p-6 shadow-lg rounded-lg border border-gray-200",children:[e.jsx("div",{class:"flex justify-center items-center",children:e.jsx("svg",{class:"h-16 w-16 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 4V6H7V4H5v16h14V4h-2z"})})}),e.jsxs("div",{class:"text-center mt-4",children:[e.jsx("h3",{class:"text-xl font-semibold text-gray-800",children:"Oops, no items found!"}),e.jsx("p",{class:"mt-2 text-gray-500",children:"It seems like the list is empty. Would you like to add new data or try again later?"})]})]})}):e.jsx(e.Fragment,{})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("div",{class:"card p-3 mt-3",children:[e.jsxs("div",{class:"p-4 bg-gray-50 rounded-lg shadow-md border border-gray-200",children:[e.jsx("h3",{class:"text-lg font-semibold text-gray-900",children:"ðŸ“… Summary"}),e.jsxs("div",{class:"mt-3 flex items-center gap-2",children:[e.jsx("p",{class:"text-sm font-medium text-gray-700",children:"Completion Date:"}),e.jsx("p",{class:`text-sm font-semibold ${l.date_completion?"text-green-700":"text-gray-400"}`,children:l.date_completion?r(l.date_completion).format("LL"):"---"})]}),e.jsxs("div",{class:"mt-2 flex items-center gap-2",children:[e.jsx("p",{class:"text-sm font-medium text-gray-700",children:"Extension Date:"}),e.jsx("p",{class:`text-sm font-semibold ${l.date_extension?"text-red-600":"text-gray-400"}`,children:l.date_extension?r(l.date_extension).format("LL"):"---"})]})]}),e.jsxs("div",{class:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 mt-3 rounded-md",children:[e.jsx("strong",{class:"font-semibold",children:"Important:"}),"Â Please ",e.jsx("span",{class:"font-semibold",children:"do not delete or remove any previously uploaded documents"})," as they are crucial for version tracking."]}),a.map((s,d)=>e.jsxs("div",{class:"p-6 mb-3 border-t-2 border-blue-500 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between bg-gray-100 p-2 rounded items-center w-full text-md sm:text-md font-semibold text-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:["ðŸ“… ",e.jsx("span",{className:"text-gray-800",children:r(s.date_scheduled).format("LL")})]}),e.jsxs("p",{className:"text-red-600",children:["Extension Date:",e.jsx("span",{className:"ml-2",children:s.date_due?r(s.date_due).format("LL"):"(Not Set)"})]})]}),s.status!=="accepted"?e.jsx("form",{class:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{class:"text-sm font-semibold text-gray-700 block mb-1",children:"Type"}),e.jsxs("select",{onChange:t=>{n("type",t.target.value),h(s.id)},class:"w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Please select type"}),e.jsx("option",{value:"1",children:"Progress Report"}),e.jsx("option",{value:"2",children:"Liquidation"}),e.jsx("option",{value:"3",children:"Others"})]})]}),e.jsxs("div",{children:[e.jsx("label",{class:"text-sm font-semibold text-gray-700 block mb-1",children:"Document File"}),e.jsx("div",{class:"relative w-full",children:e.jsx("input",{type:"file",onChange:t=>{h(s.id),n("document_file",t.target.files[0])},class:"w-full px-3 py-[6px] text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white"})})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:()=>y(),class:"w-full bg-blue-500 text-white text-sm font-medium px-3 py-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-200 flex items-center justify-center gap-2",children:[e.jsx("span",{class:"icon-[tabler--upload] text-white size-4"}),"Upload"]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-3 text-center text-green-600 font-semibold",children:"âœ… The progress report has already been accepted."})}),e.jsx("div",{class:"grid grid-cols-2 gap-4 mt-2",children:s.details.map((t,i)=>e.jsxs("div",{id:`listings-${i}`,class:"border-l-4 border-green-400 pl-3 py-2 bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{class:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded-md",children:[e.jsx("h4",{class:"text-gray-700 text-base sm:text-md font-semibold",children:t.type==="1"?"ðŸ“Œ Progress Report":t.type==="2"?"ðŸ“Š Liquidation Report":"ðŸ“‚ Others"}),e.jsxs("span",{class:"text-xs text-gray-600",children:[r(t.files.created_at).format("LLL"),"(",e.jsxs("time",{dateTime:t.files.created_at,children:[r().from(r(t.files.created_at),!0)," ago"]}),")"]})]}),e.jsx("ul",{role:"list",class:"divide-y divide-gray-200 mt-2 text-xs border border-gray-200 rounded-md",children:e.jsxs("li",{class:"flex items-center justify-between py-2 px-3",children:[e.jsxs("div",{class:"flex w-0 flex-1 items-center gap-2",children:[e.jsx("span",{class:"icon-[tabler--paperclip] size-5 flex-shrink-0 text-gray-600"}),e.jsx("span",{class:"truncate font-medium text-gray-800",children:t.files.file_name})]}),e.jsx("div",{class:"flex-shrink-0"})]})})]}))}),s.status=="accepted"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-blue-50 border border-blue-300 text-blue-800 flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 mt-1 text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-700",children:"Actions needed:"}),e.jsxs("p",{className:"text-sm mt-1",children:["Kindly submit a ",e.jsx("span",{className:"font-medium underline",children:"hardcopy"})," of the progress report."]})]})]})}):e.jsx(e.Fragment,{}),s.details.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-white p-6 shadow-lg rounded-lg border border-gray-200",children:[e.jsx("div",{class:"flex justify-center items-center",children:e.jsx("svg",{class:"h-16 w-16 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 4V6H7V4H5v16h14V4h-2z"})})}),e.jsxs("div",{class:"text-center mt-4",children:[e.jsx("h3",{class:"text-xl font-semibold text-gray-800",children:"Oops, no items found!"}),e.jsx("p",{class:"mt-2 text-gray-500",children:"It seems like the list is empty. Would you like to add new data or try again later?"})]})]})}):e.jsx(e.Fragment,{})]})),a.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-white p-6 shadow-lg rounded-lg border border-gray-200",children:[e.jsx("div",{class:"flex justify-center items-center",children:e.jsx("svg",{class:"h-16 w-16 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 4V6H7V4H5v16h14V4h-2z"})})}),e.jsxs("div",{class:"text-center mt-4",children:[e.jsx("h3",{class:"text-xl font-semibold text-gray-800",children:"Oops, no items found!"}),e.jsx("p",{class:"mt-2 text-gray-500",children:"It seems like the list is empty. Would you like to add new data or try again later?"})]})]})}):e.jsx(e.Fragment,{})]})})})}),e.jsx("div",{id:"tabs-progress-2",class:"hidden",role:"tabpanel","aria-labelledby":"tabs-progress-item-2",children:e.jsx("div",{class:"vertical-scrollbar rounded-scrollbar max-h-screen w-full p-4",children:e.jsx(V,{user:c,research:l,feedbacks_step9:j})})})]})]})}export{q as default};
