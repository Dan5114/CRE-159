import{r as o,G as h,j as e,S as g}from"./app-CfsFC_sX.js";import{A as b}from"./AuthenticatedLayout-CX16CKjS.js";import{d as c,r as y,l as v}from"./localizedFormat-VpGZUg9_.js";/* empty css                  */import{J as w}from"./jodit-react-CtE3-kLk.js";import"./lodash-rTh0s5b3.js";c.extend(y);c.extend(v);function k(n){const u=parseInt(n.id,10),d=(t,s)=>{if(!Array.isArray(t)||t.length===0)return console.warn("Invalid or empty instruction_content array."),null;if(typeof s!="number"||isNaN(s))return console.warn("Invalid step parameter. It must be a number."),null;const i=t.find(l=>l.steps?parseInt(l.steps.replace(/[^\d]/g,""))===s:(console.warn("Step data is missing for some entries."),!1));return i||console.warn(`No card found for Step ${s}.`),i||null},r=o.useRef(null),[f,m]=o.useState(""),{setData:a,post:p}=h({steps:n.id});o.useEffect(()=>{var s;const t=((s=d(n.instruction_content,u))==null?void 0:s.content)??null;t&&m(t)},[]);const x=()=>{if(!r.current)return;const t=r.current.getEditorValue;window.confirm("ðŸ“‚ Are you sure you want to save changes?")&&(a("content",t),p(route("instructions.store"),{onSuccess:s=>{console.log(s.props.flash.message||"Content saved successfully!")},onError:s=>{console.log("Failed to save content. Please try again.")},onFinish:()=>{console.log("Finished sending message")}}))};return e.jsxs(b,{header:e.jsx("div",{className:"flex text-white",children:e.jsx("h2",{className:"text-xl text-white font-extrabold leading-none tracking-tight",children:"View Instructions / Guidelines"})}),children:[e.jsx(g,{title:"Application Tracking"}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"overflow-x-auto card p-2",children:[e.jsxs("h2",{className:"text-2xl lead p-3",children:["Step ",n.id," Instructions"]}),e.jsx(w,{ref:r,value:f,onBlur:t=>a("content",t),config:{height:600,resizable:!1,allowResizeX:!1,allowResizeY:!1,toolbarSticky:!1,toolbar:["undo","redo","|","bold","italic","underline","|","align","ul","ol"],readonly:!1,buttons:["source","|","bold","italic","underline","strikethrough","|","superscript","subscript","|","ul","ol","indent","outdent","|","font","fontsize","brush","paragraph","|","table","link","|","align","|","undo","redo","|","hr","eraser","copyformat","fullsize"],toolbarAdaptive:!1}}),e.jsxs("button",{type:"button",onClick:x,className:"btn btn-primary w-[200px] flex items-center ml-auto gap-2 mt-2",children:[e.jsx("span",{className:"icon-[tabler--file] size-6 align-bottom"}),"Save Changes"]})]})})})]})}export{k as default};
